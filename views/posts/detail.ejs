<%- include('../layouts/main', { title: title, user: user }) %>

<style>
.byz-post-wrapper {
    max-width: 1140px;
    margin: 0 auto;
    padding: 0 15px;
}

.byz-post-container {
    background: white;
    position: relative;
    overflow: hidden;
    border-radius: 12px;
    padding: 2rem 0;
}

.byz-featured-image {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.byz-featured-image img {
    height: 400px;
    object-fit: cover;
    width: 100%;
}

.byz-card {
    background: linear-gradient(90deg, #2c5530 0%, #1e3a21 100%);
    border: none;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.byz-card .card-body {
    color: rgba(255,255,255,0.9);
}

.byz-card-header {
    background: rgba(255,255,255,0.1);
    border: none;
    padding: 1rem 1.25rem;
    color: white;
}

.byz-gallery-item {
    display: block;
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
}

.byz-gallery-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15) !important;
}

.byz-gallery-item:hover img {
    transform: scale(1.05);
}

.byz-gallery-item img {
    height: 120px;
    object-fit: cover;
    width: 100%;
    transition: all 0.3s ease;
}

.content-area img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 1rem 0;
}

.content-area a {
    color: rgba(255,255,255,0.9);
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
}

.content-area a:hover {
    color: white;
    text-decoration: underline;
}

.byz-meta-icon {
    color: rgba(255,255,255,0.9);
    margin-right: 0.5rem;
}

.byz-meta-text {
    color: rgba(255,255,255,0.8);
}

.byz-meta-text strong {
    color: white;
}

@media (max-width: 768px) {
    .byz-post-wrapper {
        padding: 0 10px;
    }
    
    .byz-featured-image img {
        height: 300px;
    }
}
</style>

        <div class="byz-post-wrapper">
            <div class="byz-post-container">
                <!-- Decorative Elements -->
                <div class="byz-decorative-circle" style="position: absolute; width: 300px; height: 300px; border-radius: 50%; background: rgba(255,255,255,0.03); top: -100px; right: -100px;"></div>
                <div class="byz-decorative-circle" style="position: absolute; width: 200px; height: 200px; border-radius: 50%; background: rgba(255,255,255,0.02); bottom: -50px; left: -50px;"></div>

                <div class="container-fluid px-3">
                    <div class="row">
                        <!-- Activity Content -->
                        <div class="col-lg-8">
                            <!-- Featured Image -->
                            <% if (post.featured_image) { %>
                                <div class="mb-4 position-relative byz-featured-image">
                                    <img src="<%= post.featured_image %>" class="img-fluid" alt="<%= post.title %>">
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.7), transparent); padding: 40px 20px 20px;">
                                        <h1 class="text-white mb-0" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);"><%= post.title %></h1>
                                    </div>
                                </div>
                            <% } %>

                            <!-- Activity Info -->
                            <div class="card byz-card mb-4">
                                <div class="card-body p-4">
                                    <% if (!post.featured_image) { %>
                                        <h1 class="card-title fw-bold mb-4 text-white"><%= post.title %></h1>
                                    <% } %>
                                    
                                    <div class="row mb-4">
                                        <div class="col-md-6">
                                            <div class="d-flex align-items-center mb-3">
                                                <i class="fas fa-calendar byz-meta-icon"></i>
                                                <span class="byz-meta-text">Tanggal: <strong><%= post.activity_date ? new Date(post.activity_date).toLocaleDateString('id-ID') : 'Tidak ditentukan' %></strong></span>
                                            </div>
                                            <div class="d-flex align-items-center mb-3">
                                                <i class="fas fa-map-marker-alt byz-meta-icon"></i>
                                                <span class="byz-meta-text">Lokasi: <strong><%= post.location || 'Tidak ditentukan' %></strong></span>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="d-flex align-items-center mb-3">
                                                <i class="fas fa-tag byz-meta-icon"></i>
                                                <span class="byz-meta-text">Kategori: <strong><%= post.category_name || 'Umum' %></strong></span>
                                            </div>
                                            <div class="d-flex align-items-center mb-3">
                                                <i class="fas fa-user byz-meta-icon"></i>
                                                <span class="byz-meta-text">Dibuat oleh: <strong><%= post.author_name || 'Admin' %></strong></span>
                                            </div>
                                        </div>
                                    </div>

                                    <% if (post.excerpt) { %>
                                        <div class="alert mb-4" style="background: rgba(255,255,255,0.1); border: none; border-left: 4px solid rgba(255,255,255,0.3); border-radius: 4px;">
                                            <i class="fas fa-info-circle me-2 text-white"></i>
                                            <strong class="text-white">Deskripsi Singkat:</strong><br>
                                            <span style="color: rgba(255,255,255,0.9);"><%= post.excerpt %></span>
                                        </div>
                                    <% } %>

                                    <div class="content-area mt-4">
                                        <h5 class="fw-bold mb-3 text-white">Detail Kegiatan</h5>
                                        <div><%- post.content %></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Video Section -->
                            <% if (post.video_url) { %>
                                <div class="card byz-card mb-4">
                                    <div class="byz-card-header">
                                        <h5 class="mb-0"><i class="fas fa-video me-2"></i>Video Dokumentasi</h5>
                                    </div>
                                    <div class="card-body p-4">
                                        <div class="ratio ratio-16x9" style="border-radius: 8px; overflow: hidden;">
                                            <iframe src="<%= getYouTubeEmbedUrl(post.video_url) %>" 
                                                    title="<%= post.title %>" 
                                                    frameborder="0" 
                                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                                    allowfullscreen></iframe>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                        </div>

                        <!-- Sidebar -->
                        <div class="col-lg-4">
                            <!-- Activity Gallery -->
                            <% if (typeof postImages !== 'undefined' && postImages.length > 0) { %>
                                <div class="card byz-card mb-4">
                                    <div class="byz-card-header">
                                        <h5 class="mb-0"><i class="fas fa-images me-2"></i>Gallery Foto</h5>
                                    </div>
                                    <div class="card-body p-3">
                                        <div class="row g-2">
                                            <% postImages.forEach((image, index) => { %>
                                                <div class="col-6">
                                                    <a href="<%= image.image_path %>" data-lightbox="gallery" data-title="<%= post.title %>" class="byz-gallery-item">
                                                        <img src="<%= image.image_path %>" class="img-fluid" alt="Foto kegiatan">
                                                    </a>
                                                </div>
                                            <% }); %>
                                        </div>
                                    </div>
                                </div>
                            <% } %>

                            <!-- Related Activities -->
                            <div class="card byz-card">
                                <div class="byz-card-header">
                                    <h5 class="mb-0"><i class="fas fa-calendar-alt me-2"></i>Kegiatan Terkait</h5>
                                </div>
                                <div class="card-body p-4">
                                    <p class="mb-4" style="color: rgba(255,255,255,0.8);">Kegiatan lain yang mungkin menarik untuk Anda</p>
                                    <div class="text-center py-3">
                                        <i class="fas fa-spinner fa-spin text-white"></i>
                                        <p class="mt-2" style="color: rgba(255,255,255,0.8);">Memuat kegiatan terkait...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <%- include('../layouts/footer') %>
    